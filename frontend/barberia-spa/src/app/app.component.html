<main class="layout">
  <app-hero-section [title]="title" [requestSuccess]="requestSuccess" [requestError]="requestError"></app-hero-section>

  <app-metrics-grid [summary]="summary()"></app-metrics-grid>

  <section class="grid actions">
    <app-client-form
      [submitting]="submittingClient"
      [resetKey]="clientResetKey"
      (submitClient)="registerClient($event)"
    ></app-client-form>

    <app-appointment-form
      [clients]="clients()"
      [barbers]="barbers()"
      [submitting]="submittingAppointment"
      [resetKey]="appointmentResetKey"
      (submitAppointment)="createAppointment($event)"
    ></app-appointment-form>
  </section>

  <app-catalog-panel
    [barbers]="barbers()"
    [clients]="clients()"
    [appointments]="sortedAppointments()"
    [loadingCatalogs]="loadingCatalogs"
    [loadingAppointments]="loadingAppointments"
    (refreshCatalogs)="loadCatalogs()"
    (refreshAppointments)="loadAppointments()"
  ></app-catalog-panel>

  <app-inventory-view
    [products]="products()"
    [stockReport]="stockReport()"
    [salesReport]="salesProjection()"
    [submitting]="loadingInventory"
    (refreshInventory)="loadInventory()"
    (createProduct)="createProduct($event)"
    (registerPurchase)="registerPurchase($event)"
    (registerSale)="registerSale($event)"
  ></app-inventory-view>

  <app-sales-view
    [session]="cashSession()"
    [salesReport]="salesReport()"
    [processing]="loadingPayments"
    (openCash)="openCashRegister($event)"
    (closeCash)="closeCashRegister($event)"
    (sendPayment)="registerPayment($event)"
    (refreshSales)="loadCashData()"
  ></app-sales-view>

  <app-endpoints-list [endpoints]="endpoints"></app-endpoints-list>

  <app-feature-map [features]="featureMatrix"></app-feature-map>
</main>
